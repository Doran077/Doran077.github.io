<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon32.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon16.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-corner-indicator.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"example.com",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!0,style:null},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="Vuex一 认识Vuex1.1 vuex是做什么的 官方解释：Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。 它采用 集中式存储管理 应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。 Vuex 也集成到 Vue 的官方调试工具 devtools extension，提供了诸如零配置的 time-travel 调试、状态快照导入导出等高级调试功能。"><meta property="og:type" content="article"><meta property="og:title" content="07_Vuex状态管理插件"><meta property="og:url" content="http://example.com/Vue/%E7%AC%94%E8%AE%B0/vue/07-Vuex%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E6%8F%92%E4%BB%B6/index.html"><meta property="og:site_name" content="Doran"><meta property="og:description" content="Vuex一 认识Vuex1.1 vuex是做什么的 官方解释：Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。 它采用 集中式存储管理 应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。 Vuex 也集成到 Vue 的官方调试工具 devtools extension，提供了诸如零配置的 time-travel 调试、状态快照导入导出等高级调试功能。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://s3.ax1x.com/2021/01/03/s9MAoV.png"><meta property="og:image" content="https://s3.ax1x.com/2021/01/03/s9KXIf.png"><meta property="og:image" content="https://s3.ax1x.com/2021/01/03/s9KOdP.png"><meta property="og:image" content="https://s3.ax1x.com/2021/01/03/s9Mkd0.png"><meta property="article:published_time" content="2021-01-01T13:02:16.000Z"><meta property="article:modified_time" content="2021-01-03T07:27:06.292Z"><meta property="article:author" content="Doran"><meta property="article:tag" content="Vue"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://s3.ax1x.com/2021/01/03/s9MAoV.png"><link rel="canonical" href="http://example.com/Vue/%E7%AC%94%E8%AE%B0/vue/07-Vuex%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E6%8F%92%E4%BB%B6/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>07_Vuex状态管理插件 | Doran</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">Doran</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">爱生活,爱学习</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><main id="doran" class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://example.com/Vue/%E7%AC%94%E8%AE%B0/vue/07-Vuex%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E6%8F%92%E4%BB%B6/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile.jpg"><meta itemprop="name" content="Doran"><meta itemprop="description" content="爱生活、爱学习、勤思考、代码、干货、博客"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Doran"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">07_Vuex状态管理插件</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2021-01-01 21:02:16" itemprop="dateCreated datePublished" datetime="2021-01-01T21:02:16+08:00">2021-01-01</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2021-01-03 15:27:06" itemprop="dateModified" datetime="2021-01-03T15:27:06+08:00">2021-01-03</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Vue/" itemprop="url" rel="index"><span itemprop="name">Vue</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Vue/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a> </span></span><span id="/Vue/%E7%AC%94%E8%AE%B0/vue/07-Vuex%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E6%8F%92%E4%BB%B6/" class="post-meta-item leancloud_visitors" data-flag-title="07_Vuex状态管理插件" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="leancloud-visitors-count"></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>11k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>10 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h2><h3 id="一-认识Vuex"><a href="#一-认识Vuex" class="headerlink" title="一 认识Vuex"></a>一 认识Vuex</h3><h4 id="1-1-vuex是做什么的"><a href="#1-1-vuex是做什么的" class="headerlink" title="1.1 vuex是做什么的"></a>1.1 vuex是做什么的</h4><ul><li>官方解释：Vuex 是一个专为 Vue.js 应用程序开发的<strong>状态管理模式</strong>。<ul><li>它采用 集中式存储管理 应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。</li><li>Vuex 也集成到 Vue 的官方调试工具 <a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-devtools">devtools</a><a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-devtools"> extension</a>，提供了诸如零配置的 time-travel 调试、状态快照导入导出等高级调试功能。</li></ul></li></ul><a id="more"></a><ul><li><p><strong>状态管理</strong>到底是什么？</p><ul><li><strong>状态管理模式、集中式存储管理</strong>这些名词听起来就非常高大上，让人捉摸不透。</li><li>其实，你可以简单的将其看成把需要多个组件共享的变量全部存储在一个对象里面。</li><li>然后，将这个对象放在顶层的Vue实例中，让其他组件可以使用。</li><li>那么，多个组件是不是就可以共享这个对象中的所有变量属性了呢？</li></ul></li><li><p>等等，如果是这样的话，为什么官方还要专门出一个插件Vuex呢？难道我们不能自己封装一个对象来管理吗？</p><ul><li>当然可以，只是我们要先想想VueJS带给我们最大的便利是什么呢？没错，就是<font color="red"><strong>响应式</strong></font>。</li><li>如果你自己封装实现一个对象能不能保证它里面所有的属性做到响应式呢？当然也可以，只是自己封装可能稍微麻烦一些。</li><li>不用怀疑，Vuex就是为了提供这样一个在多个组件间共享状态的插件，用它就可以了。</li></ul></li></ul><h4 id="1-2-vuex管理什么状态呢"><a href="#1-2-vuex管理什么状态呢" class="headerlink" title="1.2 vuex管理什么状态呢"></a>1.2 vuex管理什么状态呢</h4><ul><li>但是，有什么状态时需要我们在多个组件间共享的呢？<ul><li>如果你做过大型开放，你一定遇到过多个状态，在多个界面间的共享问题。</li><li>比如用户的登录状态、用户名称、头像、地理位置信息等等。</li><li>比如商品的收藏、购物车中的物品等等。</li><li>这些状态信息，我们都可以放在统一的地方，对它进行保存和管理，而且它们还是响应式的（待会儿我们就可以看到代码了，莫着急）。</li></ul></li></ul><h4 id="1-3-单页面的状态管理"><a href="#1-3-单页面的状态管理" class="headerlink" title="1.3 单页面的状态管理"></a>1.3 单页面的状态管理</h4><ul><li>我们知道，要在单个组件中进行状态管理是一件非常简单的事情<ul><li>State：不用多说，就是我们的状态。（你姑且可以当做就是data中的属性）</li><li>View：视图层，可以针对State的变化，显示不同的信息。（这个好理解吧？）</li><li>Actions：这里的Actions主要是用户的各种操作：点击、输入等等，会导致状态的改变。</li></ul></li></ul><p><a target="_blank" rel="noopener" href="https://imgchr.com/i/s9MAoV"><img src="/images/loadingImg.gif" data-original="https://s3.ax1x.com/2021/01/03/s9MAoV.png" alt="s9MAoV.png"></a></p><h4 id="1-4-全局单例模式（大管家）"><a href="#1-4-全局单例模式（大管家）" class="headerlink" title="1.4 全局单例模式（大管家）"></a>1.4 全局<font color="red">单例模式</font>（大管家）</h4><ul><li><p>我们现在要做的就是将共享的状态抽取出来，交给我们的大管家，统一进行管理。</p></li><li><p>之后，你们每个试图，按照我<font color="blue"><strong>规定好的</strong></font>规定，进行访问和修改等操作。</p></li><li><p>这就是Vuex背后的基本思想。</p></li></ul><h3 id="二-vuex的使用"><a href="#二-vuex的使用" class="headerlink" title="二 vuex的使用:"></a>二 vuex的使用:</h3><h4 id="2-1-配置vuex"><a href="#2-1-配置vuex" class="headerlink" title="2.1 配置vuex"></a>2.1 配置vuex</h4><ul><li><p><strong>首先安装vuex npm install vuex –save</strong></p></li><li><p><strong>然后在src文件夹下创建一个store文件夹，在该文件夹下创建index.js配置vuex。</strong></p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.安装插件</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.创建对象</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;		<span class="comment">// Vuex.Store内存储的状态(数据内容)</span></span><br><span class="line">    counter: <span class="number">100</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;		<span class="comment">// 定义操作state的方法,这些方法中都有默认的形参,传入的就是store对象的state对象</span></span><br><span class="line">    <span class="function"><span class="title">increment</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">      state.counter++</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">decrement</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">      state.counter--</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;		<span class="comment">//进行异步操作</span></span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;		<span class="comment">// 类似于计算属性</span></span><br><span class="line">    <span class="function"><span class="title">squareofCounter</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> state.counter * state.counter</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  modules: &#123;		<span class="comment">//划分模块</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.导出store对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><ul><li><strong>最后在main.js中导入并挂载在Vue实例中</strong></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    // 使用$store.state.属性名来访问state</span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;$store.state.counter&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sub&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    // getters的使用</span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;$store.getters.squareofCounter&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hello-vuex</span>&gt;</span><span class="tag">&lt;/<span class="name">hello-vuex</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> HelloVuex <span class="keyword">from</span> <span class="string">&#x27;./components/HelloVuex&#x27;</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line">  methods: &#123;</span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">add</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 使用$store.commit(&#x27;方法名&#x27;)来修改state</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.$store.commit(<span class="string">&#x27;increment&#x27;</span>)</span></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">sub</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.$store.commit(<span class="string">&#x27;decrement&#x27;</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    HelloVuex</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-2-使用vuex"><a href="#2-2-使用vuex" class="headerlink" title="2.2 使用vuex"></a>2.2 使用vuex</h4><p>通过<font color="deeppink">$store.state.状态名</font>来使用store.state内部存储的数据。</p><p>但是注意需要更改store.state内部的状态时：不要直接通过<font color="deeppink">$store.state.状态名</font>这种方式更改。</p><p>原因：</p><p>​ 流程步骤：首先State提供状态给组件，当需要修改State时，组件先发布一个Action，然后提交到Mutations。最后再将State进行修改。<br>​ 由于只有通过Mutations修改的State，此时Devtools才会记录到修改State的信息，比如谁进行了修改、修改内容是什么。此时才会让后续出错时容易查找问题出在哪儿。因此不提倡绕过Mutations直接修改<font color="deeppink">$store.state.状态名</font>的方法进行修改状态。（此外绕过Actions直接进入Mutations修改也是可以的。但是Actions可以处理异步操作。）</p><p>​ 使用$store.commit(‘方法名’)来修改state</p><p><a target="_blank" rel="noopener" href="https://imgchr.com/i/s9KXIf"><img src="/images/loadingImg.gif" data-original="https://s3.ax1x.com/2021/01/03/s9KXIf.png" alt="s9KXIf.png"></a></p><h4 id="2-3-Vuex的核心概念"><a href="#2-3-Vuex的核心概念" class="headerlink" title="2.3 Vuex的核心概念"></a>2.3 Vuex的核心概念</h4><p>vuex的核心概念包括：</p><ul><li><p>State单一状态树(用于存储状态)</p><p>​ 单一状态树（Single Source of Truth）也可翻译为单一数据源。这个意思就是在一个项目中，只需要创建一个store对象，所以需要管理的状态都放在该对象中，不要创建多余的store对象。这样在管理时只需要去找这一个store对象就能找到你需要的状态。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">state: &#123;</span><br><span class="line">  counter: <span class="number">100</span>,</span><br><span class="line">  students: [</span><br><span class="line">    &#123;<span class="attr">id</span>: <span class="number">110</span>, <span class="attr">name</span>: <span class="string">&#x27;why&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>: <span class="number">111</span>, <span class="attr">name</span>: <span class="string">&#x27;kobe&#x27;</span>, <span class="attr">age</span>: <span class="number">24</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>: <span class="number">112</span>, <span class="attr">name</span>: <span class="string">&#x27;james&#x27;</span>, <span class="attr">age</span>: <span class="number">30</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>: <span class="number">113</span>, <span class="attr">name</span>: <span class="string">&#x27;curry&#x27;</span>, <span class="attr">age</span>: <span class="number">10</span>&#125;</span><br><span class="line">  ],</span><br><span class="line">  info: &#123;</span><br><span class="line">  name: <span class="string">&#x27;kobe&#x27;</span>,</span><br><span class="line">    age: <span class="number">40</span>,</span><br><span class="line">  height: <span class="number">1.98</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li>Getters(类似于计算属性)</li></ul><p>getters作为参数和传递参数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">getters: &#123;</span><br><span class="line">  <span class="comment">// 1. getters基本使用,默认会将state作为参数传递进去</span></span><br><span class="line">  <span class="function"><span class="title">squareofCounter</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> state.counter * state.counter</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">more20stu</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> state.students.filter(<span class="function"><span class="params">s</span> =&gt;</span> s.age &gt; <span class="number">20</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 2. getters作为参数</span></span><br><span class="line">  <span class="function"><span class="title">more20stuLength</span>(<span class="params">state, getters</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> getters.more20stu.length</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 3.getters默认是不能传递参数的, 如果希望传递参数, 那么只能让getters本身返回另一个函数.</span></span><br><span class="line">  <span class="function"><span class="title">moreAgeStu</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// return function (age) &#123;</span></span><br><span class="line">    <span class="comment">//   return state.students.filter(s =&gt; s.age &gt; age)</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">age</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> state.students.filter(<span class="function"><span class="params">s</span> =&gt;</span> s.age &gt; age)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用时 :</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;$store.getters.squareofCounter&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;$store.getters.more20stu&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;$store.getters.more20stuLength&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;$store.getters.moreAgeStu(12)&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>Mutations</li></ul><ol><li>Vuex的store状态的<strong>更新唯一方式</strong>：<strong>提交Mutations</strong></li><li>Mutations主要包括两部分：</li></ol><p>字符串的<strong>事件类型（type）</strong>和一个<strong>回调函数（handler）</strong>,该回调函数的第一个参数就是state。</p><ol start="3"><li>Mutations的参数<br>他传入参数与getters传参不同,他<strong>只能接收两个参数</strong>。他可以直接在第一个参数state后添加一个要传入的参数,第二个参数被称为payload(负载)。这个payload分两种情况（具体看第四点）</li><li>Mutations的提交风格</li></ol><ul><li><p>普通提交风格</p><p>例如：this.$store.commit(‘incrementCount’, count)</p><pre><code>    此时传入的只能有两个值,第一个是要提交给的Mutations的函数名,第二个是传入的参数,可以是基本数据类型或对象。此时Mutations接收的参数中的payload就代表第二个传入的数据。</code></pre></li><li><p>特殊的提交风格在</p><p>例如：</p><p>this.$store.commit({</p><pre><code>  type: &#39;incrementCount&#39;,
  a:a,
  b:b</code></pre><p>})</p><p>​ 使用$store.commit提交时传入一个对象,这个对象的第一个属性是type其属性值为要提交给的Mutations的函数名。后边的属性是接着要传入的参数。此时Mutations接收的参数中的payload就是一个对象,该对象中存储了commit后的这个对象的所有内容。</p></li></ul><ol start="5"><li>Mutations响应规则</li></ol><p>Vuex的store中的state是响应式的, 当state中的数据发生改变时, Vue组件会自动更新。这就要求我们必须遵守一些Vuex对应的规则:</p><p><strong><font color="deeppink">提前在store中初始化好所需的属性.</font></strong></p><p>当给state中的对象添加新属性时, 使用下面的方式:<br>方式一: 使用Vue.set(obj, ‘newProp’, 123)<br>方式二: 用新对象给旧对象重新赋值</p><p>当给state中的对象删除属性时, 使用下面的方式:<br>Vue.delete(state.info, ‘age’)</p><p><font color="red"><strong>总结</strong></font>：Vuex的store中的state中的数据在原本就有的时候，这些数据是响应式的（因为在初始化时vue就将这些原本就有的属性加入响应式系统,响应式系统会进行监听变化,当变化时会通知界面中有用到该属性的地方进行刷新,而后添加的属性却没有加入响应式系统），自己后来添加上去的属性要使用一些方式才能是响应式的。</p><ol start="6"><li>Mutations的类型常量</li></ol><p>首先在src/store文件夹下创建mutations-types.js文件。在该文件中配置Mutations的类型常量。<br>例如：export const INCREMENT = ‘increment’</p><p>然后在src/store的index.js中使用increment函数是写成[INCREMENT ]的形式具体看代码。并在APP.vue中向该方法传递时使用this.$store.commit(INCREMENT)</p><p>为什么要这么使用?<br>因为如果在配置Mutations的类型常量时出错也没关系,因为两者用的都是相同的一个常量,因此就相当于两处用的虽然都是错的,但是都是相同的不会出问题。而且在定义常量后在使用常量时编辑器会有提示。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  INCREMENT</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;./mutations-types&#x27;</span></span><br><span class="line"></span><br><span class="line">mutations: &#123;		<span class="comment">// 定义操作state的方法,这些方法中都有默认的形参,传入的就是store对象的state对象</span></span><br><span class="line">  <span class="comment">// 6.使用Mutations的类型常量</span></span><br><span class="line">  [INCREMENT](state) &#123;</span><br><span class="line">    state.counter++</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">decrement</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">    state.counter--</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 接收参数</span></span><br><span class="line">  <span class="function"><span class="title">incrementCount</span>(<span class="params">state, payload</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// console.log(state,payload);</span></span><br><span class="line">    state.counter += payload.count</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">addStudent</span>(<span class="params">state, stu</span>)</span> &#123;</span><br><span class="line">    state.students.push(stu)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// Mutations响应规则</span></span><br><span class="line">  <span class="function"><span class="title">updateInfo</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// state.info.name = &#x27;coderwhy&#x27;    // 响应式的</span></span><br><span class="line"></span><br><span class="line">    state.info[<span class="string">&#x27;address&#x27;</span>] = <span class="string">&#x27;洛杉矶&#x27;</span>    <span class="comment">// 非响应式的</span></span><br><span class="line">    <span class="comment">//Vue.set(state.info, &#x27;address&#x27;, &#x27;洛杉矶&#x27;)  // 响应式的</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// delete state.info.age   // 非响应式的</span></span><br><span class="line">    <span class="comment">// Vue.delete(state.info, &#x27;age&#x27;)   // 响应式的</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>使用:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=<span class="string">&quot;add&quot;</span>&gt;+&lt;/button&gt;</span><br><span class="line">&lt;button @click=<span class="string">&quot;sub&quot;</span>&gt;-&lt;/button&gt;</span><br><span class="line">&lt;button @click=<span class="string">&quot;addCount(5)&quot;</span>&gt;+<span class="number">5</span>&lt;/button&gt;</span><br><span class="line">&lt;button @click=<span class="string">&quot;addCount(10)&quot;</span>&gt;+<span class="number">10</span>&lt;/button&gt;</span><br><span class="line">&lt;button @click=<span class="string">&quot;addStudent&quot;</span>&gt;添加学生&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Mutations响应规则</span></span><br><span class="line">&lt;h2&gt;&#123;&#123;$store.state.info&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;button @click=<span class="string">&quot;updateInfo&quot;</span>&gt;修改信息&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  INCREMENT</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;./store/mutations-types&#x27;</span></span><br><span class="line"></span><br><span class="line">methods: &#123;</span><br><span class="line">  <span class="function"><span class="title">add</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 6.使用Mutations的类型常量</span></span><br><span class="line">    <span class="built_in">this</span>.$store.commit(INCREMENT)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">sub</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 使用$store.commit(&#x27;方法名&#x27;)来修改state</span></span><br><span class="line">    <span class="built_in">this</span>.$store.commit(<span class="string">&#x27;decrement&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">	<span class="function"><span class="title">addCount</span>(<span class="params">count</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// payload: 负载</span></span><br><span class="line">    <span class="comment">// 1.普通的提交风格</span></span><br><span class="line">    <span class="comment">// this.$store.commit(&#x27;incrementCount&#x27;, count)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.特殊的提交风格</span></span><br><span class="line">    <span class="built_in">this</span>.$store.commit(&#123;</span><br><span class="line">      type: <span class="string">&#x27;incrementCount&#x27;</span>,</span><br><span class="line">      count</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">addStudent</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> stu = &#123;<span class="attr">id</span>: <span class="number">114</span>, <span class="attr">name</span>: <span class="string">&#x27;alan&#x27;</span>, <span class="attr">age</span>: <span class="number">35</span>&#125;</span><br><span class="line">    <span class="built_in">this</span>.$store.commit(<span class="string">&#x27;addStudent&#x27;</span>, stu)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">updateInfo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// this.$store.commit(&#x27;updateInfo&#x27;)</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>Action</p><p>​ 时刻注意,不要在Mutations中进行异步操作。那样做虽然对数据存储和界面显示没有影响，但是这个时候vue的官方插件Devtools捕获不到这次操作，在Devtools界面中就会显示错误的信息。解决该问题的方法就是把异步操作放到Action中进行处理。（Action类似于Mutations, 但是是用来代替Mutations进行异步操作的.）</p><p>​ 在使用时与Mutations类似，不同的是在Action中定义方法时他只能接收两个参数，第一个是context（context表示上下文,在这里就相当于store）第二个是payload。在使用时用$store.dispatch传入参数，他也是两个参数，第一个是要用于处理的Action中的方法名。第二个是携带的参数。</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用:</span></span><br><span class="line"><span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;aUpdateInfo&#x27;</span>,&#123;</span><br><span class="line">  message: <span class="string">&#x27;我是携带的信息&#x27;</span>,</span><br><span class="line">  success: <span class="function">() =&gt;</span> &#123;  <span class="comment">// 定义成功的回调</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;里面已经完成了&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义:</span></span><br><span class="line">actions: &#123;</span><br><span class="line">  <span class="comment">// context表示上下文,在这里就相当于store</span></span><br><span class="line">  <span class="function"><span class="title">aUpdateInfo</span>(<span class="params">context,payload</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      context.commit(<span class="string">&#x27;updateInfo&#x27;</span>)</span><br><span class="line">      <span class="comment">// console.log(payload)</span></span><br><span class="line">      <span class="built_in">console</span>.log(payload.message)</span><br><span class="line">      payload.success()  <span class="comment">// 在commit调用成功的回调</span></span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用promise</span></span><br><span class="line"><span class="comment">// 使用:</span></span><br><span class="line"><span class="function"><span class="title">updateInfo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.$store</span><br><span class="line">    .dispatch(<span class="string">&#x27;aUpdateInfo&#x27;</span>,<span class="string">&#x27;我是携带的信息&#x27;</span>)</span><br><span class="line">    .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;		<span class="comment">//调用dispatch后因为对方return一个Promise实例,所以调用他的then方法及成功的回调函数</span></span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line">  </span><br><span class="line"><span class="comment">//定义</span></span><br><span class="line">actions: &#123;</span><br><span class="line">  <span class="function"><span class="title">aUpdateInfo</span>(<span class="params">context,payload</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        context.commit(<span class="string">&#x27;updateInfo&#x27;</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(payload)</span><br><span class="line">        resolve(<span class="string">&#x27;11111&#x27;</span>)</span><br><span class="line">      &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><ul><li>Module</li></ul><p>Module是模块的意思, 为什么在Vuex中我们要使用模块呢?</p><p>​ Vue使用单一状态树,那么也意味着很多状态都会交给Vuex来管理.当应用变得非常复杂时,store对象就有可能变得相当臃肿.<br>​ 为了解决这个问题, Vuex允许我们将store分割成模块(Module), 而每个模块拥有自己的state、mutation、action、getters等</p><p>使用Module</p><ol><li>使用模块中的state<br>$store.state.模块名.属性名 例如:$store.state.a.name</li><li>使用模块中的mutations<br>例如:updatedName(state,payload) {state.name = payload},应参中的state仅仅表示模块中的state对象。payload表示传入的参数。在使用时是正常使用，他会在配置中循环遍历根和子模块中所有的mutations方法，只要是同名的都执行。</li><li>使用模块中的getters<br>和之前一样使用，但是要想访问根状态时就可在第三个参数传入rootState，这个参数就是根状态的state对象。</li><li>使用模块中的actions<br>此时这里面参数中的<font color="red">context</font>表示自己所处的模块，不在代表根状态整体store。并且内部还存储了一些根状态的信息。<font color="red"><strong>具体如下</strong></font>：</li></ol><p><a target="_blank" rel="noopener" href="https://imgchr.com/i/s9KOdP"><img src="/images/loadingImg.gif" data-original="https://s3.ax1x.com/2021/01/03/s9KOdP.png" alt="s9KOdP.png"></a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 示例</span></span><br><span class="line">modules: &#123;</span><br><span class="line">  a: &#123;</span><br><span class="line">    state: &#123;&#125;,</span><br><span class="line">    mutations: &#123;&#125;,</span><br><span class="line">    actions: &#123;&#125;,</span><br><span class="line">    getters: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  b: &#123;</span><br><span class="line">    state: &#123;&#125;,</span><br><span class="line">    mutations: &#123;&#125;,</span><br><span class="line">    actions: &#123;&#125;,</span><br><span class="line">    getters: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 细节</span></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line">&lt;h2&gt;&#123;&#123;$store.state.a.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;button @click=<span class="string">&quot;updatedName&quot;</span>&gt;修改&lt;/button&gt;</span><br><span class="line">&lt;h2&gt;&#123;&#123;$store.getters.fullname&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;h2&gt;&#123;&#123;$store.getters.fullname2&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;h2&gt;&#123;&#123;$store.getters.fullname3&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;button @click=<span class="string">&quot;asyncupdatedName&quot;</span>&gt;异步修改&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">updatedName</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.$store.commit(<span class="string">&#x27;updatedName&#x27;</span>,<span class="string">&quot;lisi&quot;</span>)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">asyncupdatedName</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;aUpdateName&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义</span></span><br><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    name: <span class="string">&#x27;zhangsan&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="function"><span class="title">updatedName</span>(<span class="params">state,payload</span>)</span> &#123;</span><br><span class="line">      state.name = payload</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    <span class="function"><span class="title">fullname</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> state.name + <span class="string">&#x27;11111&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">fullname2</span>(<span class="params">state, getters</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> getters.fullname + <span class="string">&#x27;2222&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">fullname3</span>(<span class="params">state, getters, rootState</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> getters.fullname2 + rootState.counter</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    <span class="function"><span class="title">aUpdateName</span>(<span class="params">context</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(context)</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        context.commit(<span class="string">&#x27;updatedName&#x27;</span>,<span class="string">&#x27;wangwu&#x27;</span>)</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">modules: &#123;</span><br><span class="line">  a: moduleA</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>项目结构组织</li></ul><p><a target="_blank" rel="noopener" href="https://imgchr.com/i/s9Mkd0"><img src="/images/loadingImg.gif" data-original="https://s3.ax1x.com/2021/01/03/s9Mkd0.png" alt="s9Mkd0.png"></a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV15741177Eh">coderwhy讲解Vue</a></p></div><div class="reward-container"><div>求大佬赏饭</div><button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'>打赏</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="/images/loadingImg.gif" data-original="https://s3.ax1x.com/2021/01/03/spzA56.png" alt="Doran 微信支付"><p>微信支付</p></div><div style="display:inline-block"><img src="/images/loadingImg.gif" data-original="https://s3.ax1x.com/2021/01/03/spxx8U.png" alt="Doran 支付宝"><p>支付宝</p></div></div></div><div><div class="my_post_copyright"><script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script><script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script><script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script><p><span>本文标题:</span><a href="/Vue/%E7%AC%94%E8%AE%B0/vue/07-Vuex%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E6%8F%92%E4%BB%B6/">07_Vuex状态管理插件</a></p><p><span>文章作者:</span><a href="/" title="访问  的个人博客">Doran</a></p><p><span>发布时间:</span>2021年01月01日 - 21:02</p><p><span>最后更新:</span>2021年01月03日 - 15:27</p><p><span>原始链接:</span><a href="/Vue/%E7%AC%94%E8%AE%B0/vue/07-Vuex%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E6%8F%92%E4%BB%B6/" title="07_Vuex状态管理插件">http://example.com/Vue/%E7%AC%94%E8%AE%B0/vue/07-Vuex%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E6%8F%92%E4%BB%B6/</a> <span class="copy-path" title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="http://example.com/Vue/%E7%AC%94%E8%AE%B0/vue/07-Vuex%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E6%8F%92%E4%BB%B6/" aria-label="复制成功！"></i></span></p><p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p></div><script>var clipboard=new Clipboard(".fa-clipboard");$(".fa-clipboard").click(function(){clipboard.on("success",function(){swal({title:"",text:"复制成功",icon:"success",showConfirmButton:!0})})})</script></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Vue/" rel="tag"># Vue</a></div><div class="post-nav"><div class="post-nav-item"><a href="/Vue/%E7%AC%94%E8%AE%B0/vue/06-Vue-router%E8%B7%AF%E7%94%B1%E6%8F%92%E4%BB%B6/" rel="prev" title="06_Vue-router路由插件"><i class="fa fa-chevron-left"></i> 06_Vue-router路由插件</a></div><div class="post-nav-item"><a href="/Vue/%E7%AC%94%E8%AE%B0/vue/08-axios%E6%A1%86%E6%9E%B6/" rel="next" title="08_axios框架">08_axios框架 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Vuex"><span class="nav-number">1.</span> <span class="nav-text">Vuex</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80-%E8%AE%A4%E8%AF%86Vuex"><span class="nav-number">1.1.</span> <span class="nav-text">一 认识Vuex</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-vuex%E6%98%AF%E5%81%9A%E4%BB%80%E4%B9%88%E7%9A%84"><span class="nav-number">1.1.1.</span> <span class="nav-text">1.1 vuex是做什么的</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-vuex%E7%AE%A1%E7%90%86%E4%BB%80%E4%B9%88%E7%8A%B6%E6%80%81%E5%91%A2"><span class="nav-number">1.1.2.</span> <span class="nav-text">1.2 vuex管理什么状态呢</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-%E5%8D%95%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="nav-number">1.1.3.</span> <span class="nav-text">1.3 单页面的状态管理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-%E5%85%A8%E5%B1%80%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%EF%BC%88%E5%A4%A7%E7%AE%A1%E5%AE%B6%EF%BC%89"><span class="nav-number">1.1.4.</span> <span class="nav-text">1.4 全局单例模式（大管家）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8C-vuex%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">1.2.</span> <span class="nav-text">二 vuex的使用:</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-%E9%85%8D%E7%BD%AEvuex"><span class="nav-number">1.2.1.</span> <span class="nav-text">2.1 配置vuex</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-%E4%BD%BF%E7%94%A8vuex"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.2 使用vuex</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-Vuex%E7%9A%84%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="nav-number">1.2.3.</span> <span class="nav-text">2.3 Vuex的核心概念</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">2.</span> <span class="nav-text">参考</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Doran" src="/images/profile.jpg"><p class="site-author-name" itemprop="name">Doran</p><div class="site-description" itemprop="description">爱生活、爱学习、勤思考、代码、干货、博客</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">15</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">4</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">2</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/Doran077" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Doran077" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:2273939848@qq.com" title="E-Mail → mailto:2273939848@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a></span></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="powered-by"><i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv"> 本站访客数:<span id="busuanzi_value_site_uv"></span></span></div><div class="copyright">&copy; <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="fa fa-heartbeat"></i> </span><span class="author" itemprop="copyrightHolder">Doran</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-area-chart"></i> </span><span title="站点总字数">82k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">1:15</span></div><script>(function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.id);
      var title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              leancloudSelector(url).innerText = 'Counter not initialized! More info at console err msg.';
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            let target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    let { app_id, app_key, server_url } = {"enable":true,"app_id":"DQWcT1et6ER6Vx2XC3Ugjv7C-gzGzoHsz","app_key":"C6XrMXQD1gLkL5qozwfhSzT8","server_url":null,"security":true};
    function fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    let api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();</script></div></footer></div><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script type="text/javascript" color="0,0,0" opacity="0.5" zindex="-1" count="150" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script><script type="text/javascript" src="/js/src/crash-cheat.js"></script><script type="text/javascript" src="/js/src/clicklove.js"></script><script>window.imageLazyLoadSetting={isSPA:!1,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>!function(n){n.imageLazyLoadSetting.processImages=i;var e=n.imageLazyLoadSetting.isSPA,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight||document.documentElement.clientHeight)&&function(){var e=r[a],t=e,n=function(){r=r.filter(function(t){return e!==t})},i=new Image,o=t.getAttribute("data-original");i.onload=function(){t.src=o,n()},i.src=o}()}i(),n.addEventListener("scroll",function(){var t=i,e=n;clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this)</script></body></html>